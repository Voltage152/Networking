在这个实验中，我们将要从不同方面探索 ICMP 协议。

   * 通过 Ping 程序产生的 ICMP 报文
   * 通过 Traceroute 程序产生的 ICMP 报文
   * 一个 ICMP 报文的格式和内容

在攻占该实验前，我们鼓励你复习书中 4.4.3 节的 ICMP 材料。我们将基于微软 Windows 平台来进行该实验，虽然将其翻译成一个 Unix 或 Linux 环境的实验也很直接。

* 1. ICMP 和 Ping
  * 让我们以捕获 Ping 程序所产生的分组来开始我们的 ICMP 探险之旅。回想 Ping 程序是一个简单的工具，用于让任何人（比如，一个网络管理员）验证一台主机是否处于活跃（接受请求并服务）状态。源主机的 Ping 程序向目的 IP 发送一个分组，如果目标是活跃状态，那么目标主机的 Ping 程序就向源主机响应一个分组。正如你所猜测的那样（毕竟这是个关于 ICMP 的实验），这两个 Ping 分组都是 ICMP 分组。
  
  * 跟着下面步骤动手做:
    * 打开 Wireshake 并开始捕获分组。
    * 在终端中输入 `ping -c 10 域名`
    * 等待 Ping 程序退出，然后停止 Wireshake 分组捕获
 
 当实验结束时，你的终端窗口应该看到如图 figure 1 所示。在这个例子中，源主机的 Ping 程序在深圳而目的主机的 Ping 程序在北京，从下面的窗口中我们可以看到，Ping 程序发送了 10 个查询分组并且收到 10 个响应，同时也注意对于每个响应，源主机计算了往返时间，对于这 10 个分组来说平均往返时间是 14.526 ms。
  在 figure 2 中提供了 Wireshake 输出的截图，在筛选框中输入 `icmp` 之后，注意到分组监控展示了 20 个分组，10 个 Ping 查询被源所发出而 10 个 Ping 响应被源所接收。同时也注意到源 IP 地址是一个 CIDR 为 192.168/12 的私有 IP 地址。而目的 IP 地址是百度北京的 Web 服务器 IP 地址，现在让我们把镜头移转到被客户端发送的第一个分组上，在下图中，这个分组的内容区域提供了关于该分组的信息，我们可以看到分组中的 IP 数据报的上层协议号是 01，这标示上层协议是 ICMP，也就是说这个 IP 数据报的载荷是 ICMP 分组报文。
  Figure 3 同样强调 ICMP，只是在分组内容窗口中展开了 ICMP 协议的详细信息，管擦好这个 Type 为 8 而且 Code 为 0 的 ICMP 回显分组，同时注意到这个 ICMP 分组包含了一个校验和字段，一个标志位字段，还有一个序列号字段。
  
  
     
 
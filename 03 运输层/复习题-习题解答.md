### 3.1 ~ 3.3 节
#### R1 假定网络层提供了下列服务。在源主机中的网络层接收最大长度 1200 字节和来自运输层的目的主机地址的报文段。网络层则保证将该报文段交付给位于目的主机的运输层。假定在目的主机上能够运行许多网络应用进程。
#### a. 设计可能最简单的运输层协议，该协议将使应用层程序数据到达位于目的主机的所希望的进程。假设在目的主机的操作系统已经为每个运行的应用程序分配了一个 4 字节的端口号。
#### b. 修改这个协议，使它向目的进程提供一个 “返回地址”。
#### c. 在你的协议中，该运输层在计算机网络的核心中 “必须做任何事” 吗？

> a.
> 
> 运输层会在应用层报文首部附着一个 2 字节的目的端口字段，网络层会在运输层报文首部附着一个 4 字节的目的主机地址字段，这样的话，该运输层的 MSS 就是 1194 字节。当该报文段被网络层发出，到达目的主机的网络层时，目的主机的网络层将 4 字节主机地址字段拆除，将剩余部分上交给运输层，运输层根据报文段中的目的端口号将报文段交给绑定该端口的相应套接字，数据从套接字便流向了对应的应用程序。
> 
> b.
> 
> 此时，运输层会在应用层报文段附着两个字段，分别是 2 字节的目的端口号，2 字节的源端口号，网络层会在运输层报文段首部附着 4 字节的目的主机地址和 4 字节的源主机地址，这样的话，该运输层的 MSS 就是 1188 字节。于是数据在到达目的主机后，目的主机能够根据报文中的源主机字段和源端口字段给源主机上的应用程序回传数据。
> 
> c.
> 
> 不是，在我的协议中，网络中路由器只关心报文的网络层首部即主机地址，而不关心运输层附着的字段比如端口。毕竟，网络层中的构件都只实现了协议栈的底部 2 层或 3 层，而运输层只在端系统中实现。

#### R2 考虑有一个星球，每个人都属于某个六口之家，每个家庭都住在自己的房子里，每个房子都有一个唯一的地址，并且某给定家庭中的每一个人都有一个独特的名字。假定该星球有一个从源家庭到目的家庭交付信件的邮政服务。该邮政服务要求：1、在一个信封中有一封信；2、在信封上清楚地写上目的家庭的地址（并且没有别的东西）。假设每个家庭有一名家庭成员代表为家庭中的其他成员收集和分发信件。这些信没有必要提供任何有关信的接收者的提示。
#### a. 使用对上面复习题 R1 的解决方案作为启发，描述家庭成员代表能够使用的协议，以从发送家庭成员向接收家庭成员交付信件。
#### b. 在你的协议中，该邮政服务必须打开信封并检查信件能容才能提供它的服务吗？

> a.
> 
> 家庭成员代表首先在信件底部填写发送该信件的家庭成员的名字，接着把信件打包，在信封上写下目的家庭的地址，然后把信封交给邮政服务，在目的家庭中 ，家庭成员代表拆开信封，根据每个信件底部的家庭成员的名字，分别把信交给不同的家庭成员手中。
> 
> b.
> 
> 


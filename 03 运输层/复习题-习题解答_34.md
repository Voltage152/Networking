### 3.4

#### R9 在我们的 rdt 协议中，为什么要引入序号？

> 假设底层信道是会产生比特差错的不丢包信道，那么接收方收到的包可能已经被损坏，此时我们要求发送方重传分组，直到接收方接收到完整无损的包，于是产生如下 FSM。
> 
> ![](https://github.com/YangXiaoHei/Networking/blob/master/03%20运输层/images/r9.1.png)
> 
> 上面这幅图的接收发和发送方是无法正常工作的，因为没有考虑到 ACK 和 NAK 包也会损坏的可能性。
> 
> 解决 ACK 和 NAK 也会损坏的方案是：若发送方接收到损坏的确认分组，那么它重传上一个分组，这么做带来的困难之处在于，对于接收方来说，我无法确认我发送的确认报文是否完好无损地被发送方接收到，所以我无法确认发送方下一个发过来的分组是一个新分组还是一个重传的分组。针对该困难，对分组引入序号即可解决，转换到接收方的视角，此时我收到 0 分组，我发送了 ACK 确认分组，下一次我又收到了 0 分组，这说明我的 ACK 分组在传送途中损坏，此时我再次重传 ACK 分组。如果此时我收到 0 分组，我发送了 ACK 确认分组，下一次我收到 1 分组，这说明我的 ACK 分组已经被发送方正常接收，于是产生了如下图所示的 FSM。
> 
> ![](https://github.com/YangXiaoHei/Networking/blob/master/03%20运输层/images/r9.2.png)

#### R10 在我们的 rdt 协议中，为什么要引入定时器？

> 假设信道即会产生比特差错，也会丢包，那么此时我们的停等协议可能会永远卡死，而无法进入到下一个状态重传分组。因此需要引入定时器来判定是否发生了丢包事件，于是产生了如下图所示的 FSM。
> 
> ![](https://github.com/YangXiaoHei/Networking/blob/master/03%20运输层/images/r10.1.png)

#### R11 假定发送方和接收方之间的往返时延是固定的并且为发送方所知。假设分组能够丢失的话，在协议 rdt 3.0 中，一个定时器仍是必需的吗？试解释之。

#### R12 在配套网站上使用 Go-Back-N (回退 N 步) Java 小程序。
#### a. 让源发送 5 个分组，在这 5 个分组的任何一个到达目的地之前暂停该动画。然后毁掉第一个分组并继续该动画。试描述发生的情况。
#### b. 重复该实验，指示现在让第一个分组到达目的地并毁掉第一个确认。再次描述发生的情况。
#### c. 最后，尝试发送 6 个分组。发生了什么情况？

#### R13 重复复习题 R12，但是现在使用 Selective Repeat (选择重传) Java 小程序
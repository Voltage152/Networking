#### 链路层
* 5.1 链路层概述

  * 坐飞机可以从昆明到深圳，坐火车或者坐轮船也可以，不同的交通运输方式类比于不同的链路层协议。
  
  * 5.1.1 链路层提供的服务
  
     * 成帧 : 添加链路层首部，封装链路层帧
     
     * 链路接入 : 点对点链路的帧的传输规则，多个结点共享单个广播链路时帧的传输规则。
     
     * 可靠交付 : 通过确认和重传实现，链路层可靠交付通常用于易于产生高差错率的链路，比如无线链路。对于低比特差错链路，比如光纤、同轴电缆和双绞铜线链路，链路层的可靠交付可能被认为是不必要的开销，因此许多有线链路层协议不提供可靠交付服务。
     
     * 差错检测和纠正 : 帧中的某个比特是 1，但接收方可能不正确将其判断为 0，这种比特差错是由信号衰减和电磁噪声导致的。链路层的差错检测和纠正比运输层和网络层的更复杂，并且用硬件实现。
     
  * 5.1.2 链路层在何处实现
  
     * 路由器: 链路层协议实现在线路卡中。
     
     * 主机:
       * ![](https://github.com/YangXiaoHei/Networking/blob/master/05%20链路层/images/link_layer_imp_position.png)
       * 在发送端，控制器取得了协议栈高层生成并存储在主机内存中的数据报，在链路层帧中封装该数据报，然后遵循链路接入协议将该帧传进通信链路中。在接收端，控制器接收了整个帧，抽取出网络层数据报。如果链路层执行差错检测，则发送控制器在该帧首部设置差错检测比特，由接收控制器执行差错检测。
       
* 5.2 差错检测和纠正技术

  * 5.2.1 奇偶校验
  
  	  * 对于二维奇偶校验来说，可以检错并且纠错（只针对一位比特差错来说）
  	 
  * 5.2.2 检验和方法
  
     * 实现 [checksum.c](https://github.com/YangXiaoHei/Networking/blob/master/05%20链路层/progs/checksum.c)
  
  * 5.2.3 循环冗余检测 (CRC)
  
     * 选择一个生成多项式 G = 10011，那么将原数据 D = 110110111 左移 4 位变成 D = 110110111 0000，然后用 D 模2除以 G，最后将得到的余数 R 附着在 D 因为左移而产生的 0 位上，R 就是 CRC 校验码。
     
     * 每个 CRC 标准都能检测小于 `r+1` 比特的突发差错，在适当的假设下，长度大于 `r+1` 比特的突发差错以概率 `1 - 0.5^r` 被检测到，每个 CRC 标准也能检测任何奇数个比特差错。
  
* 5.3 多路访问链路和协议

  * 5.3.1 信道划分协议
    * TDM (时分)
    * FDM (频分)
    * CDMA （码分多址）
  
  * 5.3.2 随机接入协议
    * 时隙 ALOHA
    * 纯 ALOHA
    * CSMA、CSMA/CD
  
  * 5.3.3 轮流协议
    * 轮询协议
    * 令牌传递协议
  
  * 5.3.4 DOCSIS
     * ![](https://github.com/YangXiaoHei/Networking/blob/master/05%20链路层/images/DOCSIS.png)
     * 上行信道被 CMTS 使用 TDM 划分，一组时隙为特殊请求帧时隙；一组时隙为数据帧时隙。调制电缆解调器在请求帧时隙间隔内向 CMTS 发送请求帧来告知 CMTS 自己有数据要发送。
     * 接下来 CMTS 在下行信道通过发送 MAP 控制报文，指定哪个电缆调制解调器能够在数据时隙中传输由控制报指定的时间间隔。由于上行信道的数据时隙的使用是由 CMTS 指定的，故不会发生碰撞。
     * CMTS 下行信道只有 CMTS 一个发言者，也不存在碰撞问题。
     * 唯一可能产生碰撞的地方是电缆调制解调器向 CMTS 发送请求帧所用的时隙，这里的电缆调制解调器既不侦听上行信道是否忙，也不检测碰撞。相反，它如果在下一个下行控制报文中没有收到对请求分配的响应的话，就认为经历了一次碰撞，那么电缆调制解调器使用二进制指数回退等待一个时间，再发送请求帧。 
  
* 5.4 交换局域网
  * 5.4.1 链路层寻址和 ARP
     * 1、MAC 地址
     * 2、ARP
     * 3、发送数据报到子网以外
  * 5.4.2 以太网
     * 1、以太网帧结构
     * 2、以太网技术 
  * 5.4.3 链路层交换机
     * 1、交换机转发和过滤
     * 2、自学习
     * 3、链路层交换机的性质
     * 4、交换机毒化
  * 5.4.4 虚拟局域网
* 5.5 链路虚拟化: 网络作为链路层
  * 多协议标签交换
* 5.6 数据中心网络
  * 5.6.1 负载均衡
  * 5.6.2 等级体系结构
  * 5.6.3 数据中心网络的发展趋势
* 5.7 回顾: Web 页面请求的历程
  * 5.7.1 准备: DHCP、UDP、IP 和以太网
  * 5.7.2 仍在准备: DNS 和 ARP
  * 5.7.3 仍在准备: 域内路选择到 DNS 服务器
  * 5.7.4 Web 客户 - 服务器交互: TCP 和 HTTP
